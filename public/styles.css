:root {
  --bg: #0e1218;
  --bg-elev: #161c25;
  --text: #e8edf3;
  --muted: #9aacbf;
  --primary: #2d7ef7;
  --ok: #20bf6b;
  --warning: #f7b731;
  --critical: #eb3b5a;
  --border: #263041;
}

* { box-sizing: border-box; }
body { margin: 0; font-family: Inter, Segoe UI, Roboto, sans-serif; background: var(--bg); color: var(--text); }
.hidden { display: none !important; }

.login-view { min-height: 100vh; display: grid; place-items: center; padding: 1rem; }
.login-card { width: min(420px, 100%); background: var(--bg-elev); border: 1px solid var(--border); border-radius: 14px; padding: 1rem; display: grid; gap: .7rem; }
.login-card input { width: 100%; padding: .55rem; border:1px solid var(--border); border-radius:8px; background:#0c1118; color:var(--text); }
.login-card button { background:var(--primary); color:#fff; border:0; border-radius:8px; padding:.6rem; cursor:pointer; }
.error { color: #ff8fa2; min-height: 1.2rem; }

.app-shell { display: grid; grid-template-columns: 240px 1fr; min-height: 100vh; }
.sidebar { background: #0b0f14; border-right: 1px solid var(--border); padding: 1rem; }
.sidebar h1 { font-size: 1.3rem; margin-top: 0; }
.sidebar p { color: var(--muted); margin-top: -.3rem; }
nav { display: flex; flex-direction: column; gap: 0.55rem; }

.nav-btn,.tab-btn { border: 1px solid var(--border); background: var(--bg-elev); color: var(--text); padding: 0.65rem 0.75rem; border-radius: 10px; cursor: pointer; }
.nav-btn.active,.tab-btn.active { background: linear-gradient(135deg, #245ec1, #2d7ef7); border-color: #3b8bff; }

.content { padding: 1rem 1rem 1.4rem; }
.topbar { display:flex; justify-content:space-between; align-items:center; gap:.6rem; flex-wrap:wrap; }
.header-right { display:flex; gap:.5rem; align-items:center; }

.badge { padding:0.25rem 0.55rem; border-radius:999px; font-size:0.8rem; border:1px solid var(--border); }
.badge.ok { background: rgba(32, 191, 107, 0.18); color: #88f5b7; }
.badge.warning { background: rgba(247, 183, 49, 0.2); color: #ffd07d; }
.badge.critical { background: rgba(235, 59, 90, 0.2); color: #ff8fa2; }

.page { display: none; }
.page.active { display: block; }
.cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.8rem; }
.card,.panel { background: var(--bg-elev); border: 1px solid var(--border); border-radius: 14px; padding: 0.9rem; margin-bottom: 0.9rem; }
.card h3 { margin: 0; color: var(--muted); font-size: 0.92rem; }
.card p { font-size: 1.35rem; margin: 0.25rem 0 0; font-weight: 700; }

.event-log { margin: 0.3rem 0 0; padding-left: 1.1rem; max-height: 240px; overflow: auto; }
.event-log li { margin-bottom: 0.4rem; color: var(--muted); }
.tabs { display: flex; gap: 0.5rem; margin-bottom: 0.6rem; flex-wrap: wrap; }

.plan-canvas { min-height: 320px; border-radius: 14px; border: 1px dashed var(--border); background: #05080c; position: relative; overflow: hidden; margin-bottom: 0.9rem; }
.zone { position:absolute; transform:translate(-50%,-50%); padding:0.28rem .5rem; border-radius:8px; font-size:.75rem; border:1px solid; white-space:nowrap; touch-action:none; }
.plan-canvas.editing .zone { cursor: grab; }
.plan-canvas.editing .zone.dragging { cursor: grabbing; }
.zone.ok { color:#98f6c1; border-color:#208f57; background:rgba(32,191,107,.2); }
.zone.warning { color:#ffd07d; border-color:#b7862f; background:rgba(247,183,49,.2); }
.zone.critical { color:#ff9fae; border-color:#a42d45; background:rgba(235,59,90,.2); }

.camera-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:.7rem; }
.camera-tile { background:#0b1017; border:1px solid var(--border); border-radius:10px; padding:.65rem; }
.camera-tile video { width:100%; border-radius:8px; margin-top:.45rem; max-height:130px; object-fit:cover; }

.config-tab { display:none; }
.config-tab.active { display:block; }
.plugin-item { display:grid; grid-template-columns:1fr auto; gap:.7rem; align-items:start; background:var(--bg-elev); border:1px solid var(--border); border-radius:12px; padding:.75rem; margin-bottom:.7rem; }
textarea,input.plugin-input,select.plugin-input { width:100%; min-height:40px; background:#0c1118; color:var(--text); border:1px solid var(--border); border-radius:8px; padding:.5rem; }
textarea { min-height:70px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
button.save { margin-top:.45rem; background:var(--primary); color:white; border:none; border-radius:8px; padding:.45rem .6rem; cursor:pointer; }

.switch { display:inline-flex; align-items:center; gap:.4rem; }
.dot { width:10px; height:10px; border-radius:999px; display:inline-block; margin-right:.45rem; }
.dot.green { background:var(--ok); }
.dot.red { background:var(--critical); }
.equipment-list { list-style:none; padding:0; margin:0; display:grid; gap:.45rem; }
.equipment-list li { display:flex; align-items:center; gap:.5rem; border:1px solid var(--border); border-radius:10px; padding:.5rem .6rem; background:#0f141d; }
.panel-header { display:flex; justify-content:space-between; align-items:center; gap:.6rem; margin-bottom:.6rem; flex-wrap:wrap; }
.edit-actions { display:flex; gap:.5rem; flex-wrap:wrap; }
.history-summary { display:flex; gap:.8rem; flex-wrap:wrap; color:var(--muted); margin-bottom:.5rem; }
.mqtt-grid { display:grid; gap:.45rem; margin-top:.45rem; }
.readonly-note { color:#ffd07d; font-size:.9rem; }

@media (max-width: 900px) {
  .app-shell { grid-template-columns: 1fr; }
  .sidebar { border-right:none; border-bottom:1px solid var(--border); }
  nav { flex-direction:row; flex-wrap:wrap; }
  .plugin-item { grid-template-columns:1fr; }
}
@media (max-width: 560px) {
  .content { padding:.8rem; }
  .cards-grid { grid-template-columns:1fr; }
  .plan-canvas { min-height:260px; }
}
